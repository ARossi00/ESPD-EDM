
==== Example 1: Suitability

===== Mock-up - contracting authority perspective

For each criteria regarding suitability, the CA should be able to provide: the register name, its URL and the Lots to which each requirement apply.

The mock-up below represents the requirements the CA should be able to specify for a suitability criterion in a procedure procurement that is *not divided into lots*:

.Self-contained 'Suitability' criterion without Lots (CA perspective)'
image::Self-contained_Suitability_NOLOTS_CA_mockup.png[Self-contained 'Suitability' criterion (CA perspective), alt="Self-contained 'Suitability' criterion (CA perspective)", align="center"]

This other mock-up represents the same situation when the procurement procedure is *divided into lots*.

The contracting authority (CA) may request that the economic operator is registered in one or multiple registers. Per each register the CA specifies to which Lots this make sense. This behaviour of â€œone set of lots per *group of properties* is regular for all those selection criteria where the allocation of lots to a set of 'criterion properties' make sense (e.g. see the section "References").

.Self-contained 'Suitability' criterion with Lots (CA perspective)'
image::Self-contained_Suitability_LOTS_CA_mockup.png[Self-contained 'Suitability' criterion (CA perspective), alt="Self-contained 'Suitability' criterion (CA perspective)", align="center"]

===== Mock-up - economic operator perspective

Notice that:

. The Lots and registers specified by the contracting authority are presented to the economic operator (on the left side of the mock-up, circles 1 to 6);

. The expected answer is "Yes", meaning that the economic operator fulfills the criterion;

. In case of answering "No" the economic operator will have to provide the reasons why it is not registered.

.Self-contained 'Suitability' criterion (EO perspective)'
image::Self-contained_Suitability_LOTS_EO_mockup.png[Self-contained 'Suitability' criterion (EO perspective), alt="Self-contained 'Suitability' criterion (EO perspective)", width="800" align="center"]

===== Criterion data structure

.'Enrolment in a relevant professional register' suitability criterion data structure (SELF-CONTAINED)
image::Selfcontained_Suitability_Enrolment_Data_Structure.png['Enrolment in a relevant professional register' suitability criterion, alt="'Enrolment in a relevant professional register' suitability criterion",align="center"]

In this case, ''Enrolment in a relevant professional register'', the ESPD-Request
document will contain one or more GROUP(s) of one (only one) REQUIREMENT which will apply to one or more Lots. Each GROUP
can ask for multiple enrolments, i.e. the economic operator will be able to specify more than one enrolment satisfying
the specific requirement.

==== Sets of data occurrence in the ESPD-Response

In the ESPD-Response, the instantiation of the elements follows this pattern (see also the
''Data elements ordered as expected in the ESPD-Response" in the table above).

* *_1st. SET OF DATA_*: Lots of the procurement procedure. See the XSD schema for the link:#viii-2-espd-request-xsd-schema[/cac:ProcurementProjectLot element]. This set of data is common to all teh ESPD-Request and ESPD-Response documents about procedures divided into lots;
* *_2nd. SET OF DATA_*: Lots to which the economic operator (EO) tenders to. See the data structure link:#lots-economic-operator-perspective[Lots tendered to] (Figure ''Figure 225. Lots tendered, data structure''). This set of data is common to all teh ESDP-Response documents about procedures divided into lots;
* *_3rd. SET OF DATA_*:
  ** CA's REQUIREMENT(s): The CA specifies one particular Register where the EO has to be enroled. It also specify the Lots
  that are affected by this REQUIREMENT;
  ** The CA can specify more than one Register and the Lots for which this enrolment makes sense;
  ** Group of QUESTION(s) addressed to the EO related to the REQUIREMENT(s) above. See the data structures about link:#data-structure-enrolments-self-contained[Enrolments];

[NOTE]
====
*_Beware that the responses of the EO are not directly linked to (i.e. do not carry information about) the REQUIREMENT or the Lots.
These links could nevertheless inferred though through the link between the link that each response keeps with the QUESTION it is linked to
(via the element `cbc:ValidatedCriterionPropertyID`). See section link:#viii-7-answering-questions[VIII.7 Answering QUESTIONs] for more details on how a response is linked
to one (and only one) QUESTION.
====

===== XML example

[NOTE]
====
*_Many compulsory elements and attributes of the XML example below have been removed to gain clarity and brevity. For
complete XML samples download the files under folder
link:https://github.com/ESPD/ESPD-EDM/tree/2.1.0/docs/src/main/asciidoc/dist/xml[dist/xml]._*

====

.'Suitability' XML example (data related to Lots in the ESPD-Response)
[source,xml]
----
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<cac:QualificationApplicationResponse xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" ... etc. -->
<!-- Root elements start here-->
<cbc:UBLVersionID schemeAgencyID="OASIS-UBL-TC">2.2</cbc:UBLVersionID>
<!-- ... etc. (beware that some root elements are compulsory, e.g. cbc:ID -->
<!-- Main aggregate components -->
<cac:ContractingParty> ... </cac:ContractingParty>
<cac:EconomicOperatorParty> ... </cac:EconomicOperatorParty>
<cac:ProcurementProject>...</cac:ProcurementProject>
<!-- Root elements end here -->

<!-- *FIRST SET OF DATA RELATED TO LOTS!* -->
<!-- In this example the CA informs that the Procurement Procedure is divided into three Lots -->
<!-- Only the IDs are truly necessary, but the CA is free to provide any other additional data -->

<cac:ProcurementProjectLot><--1-->
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot1</cbc:ID>
</cac:ProcurementProjectLot>
<cac:ProcurementProjectLot>
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot2</cbc:ID>
</cac:ProcurementProjectLot>
<cac:ProcurementProjectLot>
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot3</cbc:ID>
</cac:ProcurementProjectLot>
<cac:ProcurementProjectLot>
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot4</cbc:ID>
</cac:ProcurementProjectLot>
<cac:ProcurementProjectLot>
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot5</cbc:ID>
</cac:ProcurementProjectLot>
<cac:ProcurementProjectLot>
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot6</cbc:ID>
</cac:ProcurementProjectLot>
<cac:ProcurementProjectLot>
     <cbc:ID schemeAgencyID="EU-COM-GROW">Lot7</cbc:ID>
</cac:ProcurementProjectLot>

<!-- *SECOND SET OF DATA RELATED TO LOTS!* -->
<!-- Lots to which the EO tenders to -->
<!-- For the ESPD-Response to work properly, there is the need of having one Response per QUESTION. Therefore the EO needs to create as many `cac:TenderingCriterionProperty elements` as Lots it will tender to. This issue is being currently solved in the UBL-2.3 TC, as this should be a collection of Lot Identifiers inside one single QUESTION. -->
<!-- BEWARE that the CA, at ESPD-Request creation time is unable to know how many Lots the EOs will tender to. This implies that the number of `cac:TenderingCriterionProperty` elements in the ESPD-Request and in the ESPD-Response will be different -->
<!-- In this example, the EO tenders to two lots, Lot1 and Lot3 (see the EO responses to complete the understanding of this-->
<cac:TenderingCriterion><--2-->
    <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.1.0">8b9700b7-b13c-41e6-a220-6bbf8d5fab31</cbc:ID>
    <cbc:CriterionTypeCode listID="CriteriaTypeCode" listAgencyID="EU-COM-GROW" listVersionID="2.1.0">CRITERION.OTHER.EO_DATA.LOTS_TENDERED</cbc:CriterionTypeCode>
    <cbc:Name>Lots the EO tenders to</cbc:Name>
    <cbc:Description>Where applicable, indication of the lot(s) for which the economic operator wishes to tender</cbc:Description>
    <cac:TenderingCriterionProperty>
        <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">8281b8e5-0e13-4ca9-9896-94825d186429</cbc:ID>
        <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">QUESTION</cbc:TypeCode>
        <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
    </cac:TenderingCriterionProperty>
    <cac:TenderingCriterionProperty>
        <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">838cd8f5-eb81-4cd5-891d-40ef804cb2ee</cbc:ID>
        <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">QUESTION</cbc:TypeCode>
        <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
        </cac:TenderingCriterionProperty>
    </cac:TenderingCriterionPropertyGroup>
</cac:TenderingCriterion>

<!-- *3rd. SET OF DATA RELATED TO LOTS!* -->
<!-- List of Lots affected by one criterion GROUP of REQUIREMENT(s), i.e. the REQUIREMENT(s) related to one Register plus these particular REQUIREMENTs and QUESTIONs -->
<!-- In this example only two Registers (REQUIREMENTs) are mentioned, the first one affects Lots 1, 2, 4 and 5. The second one affects Lots 3,6 and 7 -->
<!-- The responses of the EO will be coherent with these REQUIREMENTs. -->

<cac::TenderingCriterion><--3-->
    <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">6ee55a59-6adb-4c3a-b89f-e62a7ad7be7f</cbc:ID>
    <cbc:CriterionTypeCode listID="CriteriaTypeCode" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">CRITERION.SELECTION.SUITABILITY.PROFESSIONAL_REGISTER_ENROLMENT</cbc:CriterionTypeCode>
    <cbc:Name>Enrolment in a relevant professional register</cbc:Name>
    <cbc:Description>It is enrolled in relevant professional registers ...</cbc:Description>
    <cac::Legislation> ... </cac::Legislation>
    <cac::TenderingCriterionPropertyGroup> <--4-->
        <cac::TenderingCriterionProperty> <Description>Lots the requirement apply to</Description><!-- ... etc. --> </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot1 -->
        <cac::TenderingCriterionProperty><--5-->
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">47d211d9-e933-4d93-b4d7-f45d46a6e83e</cbc:ID>
            <cbc:Description>Lot ID</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot1</cbc:ExpectedID><--4-->
        </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot2 -->
        <cac::TenderingCriterionProperty>
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">47d211d9-e933-4d93-b4d7-f45d46a6e83e</cbc:ID>
            <cbc:Description>LotIDs</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot2</cbc:ExpectedID>
        </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot4 -->
        <cac::TenderingCriterionProperty>
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">6f7c51c2-c2ac-47f2-9c7d-af9be815404a</cbc:ID>
            <cbc:Description>LotIDs</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot4</cbc:ExpectedID>
        </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot5 -->
        <cac::TenderingCriterionProperty><--6-->
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">69433c3f-0277-4a8d-a41e-3aeb8ac6257a</cbc:ID>
            <cbc:Description>LotIDs</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot5</cbc:ExpectedID>
        </cac::TenderingCriterionProperty>
        <!-- Begining of data about REQUIREMENT 1 (specification of the name and URL of the Register by the CA) -->
        <cac::SubsidiaryTenderingCriterionPropertyGroup><--7-->
            <cbc:ID schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">3aacb82e-afba-440c-b64e-1834007965a2</cbc:ID>
            <cbc:PropertyGroupTypeCode listID="PropertyGroupType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">ON*</cbc:PropertyGroupTypeCode>
            <cac::TenderingCriterionProperty>
                <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">624bb66e-ba57-423f-bd08-557342ed8a07</cbc:ID>
                <cbc:Description>Register name</cbc:Description>
                <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
                <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">DESCRIPTION</cbc:ValueDataTypeCode>
                    <cbc:ExpectedDescription>THE OFFICIAL LIST OF GAS ENGINEERS</cbc:ExpectedDescription>
            </cac::TenderingCriterionProperty>
            <cac::TenderingCriterionProperty>
                <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">bd265803-ebb0-46c0-8acd-8d99c245df34</cbc:ID>
                <cbc:Description>URL</cbc:Description>
                <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
                <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">URL</cbc:ValueDataTypeCode>
                <cbc:ExpectedID schemeID="URI" schemeAgencyID="EU-COM-GROW">https://www.gassaferister.co.uk</cbc:ExpectedID>
            </cac::TenderingCriterionProperty>
        </cac::SubsidiaryTenderingCriterionPropertyGroup>

        <!-- QUESTIONS for REQUIREMENT 1 affecting Lots 1, 2, 4, 5 would follow -->

    </cac:TenderingCriterionPropertyGroup>

    <cac::TenderingCriterionPropertyGroup><--8-->
        <cac::TenderingCriterionProperty> <Description>Lots the requirement apply to</Description><!-- ... etc. --> </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot3 -->
        <cac::TenderingCriterionProperty><--10-->
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">d01bc240-0fd2-426c-986c-123cbb7164d8</cbc:ID>
            <cbc:Description>Lot ID</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot1</cbc:ExpectedID>
        </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot6 -->
        <cac::TenderingCriterionProperty>
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">47d211d9-e933-4d93-b4d7-f45d46a6e83e</cbc:ID>
            <cbc:Description>LotIDs</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot3</cbc:ExpectedID>
        </cac::TenderingCriterionProperty>
        <!-- This will be used for Lot7 -->
        <cac::TenderingCriterionProperty><--10-->
            <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">47d211d9-e933-4d93-b4d7-f45d46a6e83e</cbc:ID>
            <cbc:Description>LotIDs</cbc:Description>
            <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
            <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">LOT_IDENTIFIER</cbc:ValueDataTypeCode>
            <cbc:ExpectedID schemeAgencyID="EU-COM-GROW">Lot3</cbc:ExpectedID>
        </cac::TenderingCriterionProperty>
        <cac::SubsidiaryTenderingCriterionPropertyGroup><--11-->
            <cbc:ID schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">3aacb82e-afba-440c-b64e-1834007965a2</cbc:ID>
            <cbc:PropertyGroupTypeCode listID="PropertyGroupType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">ON*</cbc:PropertyGroupTypeCode>
            <cac::TenderingCriterionProperty><--13-->
                <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">60c1a374-f383-450d-a4f6-484ca8a1ca58</cbc:ID>
                <cbc:Description>Register name</cbc:Description>
                <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
                <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">DESCRIPTION</cbc:ValueDataTypeCode>
                    <cbc:ExpectedDescription>AUTOMOTIVE PROFESSIONALS</cbc:ExpectedDescription>
            </cac::TenderingCriterionProperty>
            <cac::TenderingCriterionProperty>
                <cbc:ID schemeID="CriteriaTaxonomy" schemeAgencyID="EU-COM-GROW" schemeVersionID="2.0.2">bd265803-ebb0-46c0-8acd-8d99c245df34</cbc:ID>
                <cbc:Description>URL</cbc:Description>
                <cbc:TypeCode listID="CriterionElementType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">REQUIREMENT</cbc:TypeCode>
                <cbc:ValueDataTypeCode listID="ResponseDataType" listAgencyID="EU-COM-GROW" listVersionID="2.0.2">URL</cbc:ValueDataTypeCode>
                <cbc:ExpectedID schemeID="URI" schemeAgencyID="EU-COM-GROW">https://www.imiregister.co.uk</cbc:ExpectedID>
            </cac::TenderingCriterionProperty>
        </cac::SubsidiaryTenderingCriterionPropertyGroup>

         <!-- QUESTIONs linked to REQUIREMENT 2 and Lots 3, 6 and 7 would follow -->

        <!-- ... etc. -->
    </cac:TenderingCriterionPropertyGroup>

</cac::TenderingCriterion>

<!-- The rest of criteria of this ESPD-Response document will go here -->

<!-- The EO's Responses start after the last criterion (`cac:TenderingCriterion`) --> <--14-->

</cac:QualificationApplicationResponse

----
<1> *1st. SET OF DATA*: The three coming 'cac:ProcurementProjectLot' elements define the Lots into which this procurement procedure has been divided into by the CA.
<2> *2nd. SET OF DATA*: Data structure "Lots to which the EO tenders to".
<3> *3rd. SET OF DATA*: Criterion data structure "Enrolment in a relevant professional register".
<4> Group of Lots for the REQUIREMENT 1 (first Registry) starts here.
<5> First Lot of REQUIREMENT 1.
<6> Last Lot of REQUIREMENT 1.
<7> Beginning of data about REQUIREMENT 1 (specification of the name and URL of the Register by the CA)
<8> Group of Lots for the REQUIREMENT 2 (second Registry) starts here.
<9> First Lot concerning REQUIREMENT 2.
<10> Last Lot concerning REQUIREMENT 2.
<11> Beginning of data about REQUIREMENT 2 (specification of the name and URL of the Register by the CA)

